KISSY.add(function(f){var g=f.Node,d="button-tabs",c="nav-tabs",a="tab-item",b="tab-item-active",h="tab-item-hover",e="tab-item-text",k="link-tabs",l="data-item";var m=function(n){m.superclass.constructor.call(this,n);this._init()};m.ATTRS={tpl:{value:'<ul class="'+d+'"></ul>'},items:{value:[]},itemTpl:{value:'<li class="tab-item" data-value="{value}">{text}</li>'},isFormField:{value:false},form:{},hiddenTpl:{value:'<input type="hidden" name="{name}">'},name:{value:"tab-name"},renderTo:{},events:{value:["change"]}};f.extend(m,f.Base);f.augment(m,{getActiveValue:function(){var n=this,o=n.getActiveItem(),p=null;if(o){p=o.value}return p},getActiveItem:function(){var n=this,o=n.get("el"),q=o.one("."+b),p=null;if(q){p=q.data(l)}return p},setActive:function(p){var n=this,o=n._getItem(p);n._setItemActive(o)},setActiveByIndex:function(o){var n=this;n._setItemActive(n.get("items")[o])},_init:function(){var n=this;n._initDom();n._initEvent()},_initDom:function(){var n=this,s=n.get("renderTo"),o=f.one("#"+s),r="",p=new g(n.get("tpl")).appendTo(o),q=null;n.set("el",p);if(n.get("isFormField")){r=f.substitute(n.get("hiddenTpl"),{name:n.get("name")});q=new g(r);if(n.get("form")){q.appendTo(n.get("form"))}else{q.appendTo(o)}n.set("hideEl",q)}n._initItems()},_initItems:function(){var n=this,o=n.get("items");f.each(o,function(p){n._initItem(p)})},resetItems:function(o){var n=this;if(o){n.set("items",o)}n._initItem()},_initItem:function(q){var n=this,o=f.substitute(n.get("itemTpl"),q),p=new g(o).appendTo(n.get("el"));p.data(l,q);if(q.active){n._setItemActive(q,p)}},_initEvent:function(){var n=this,o=n.get("el"),p="."+a;o.delegate("click",p,function(q){q.preventDefault();n._itemClickEvent(f.one(q.currentTarget))}).delegate("mouseover",p,function(r){var q=f.one(r.currentTarget);q.addClass(h)}).delegate("mouseout",p,function(r){var q=f.one(r.currentTarget);q.removeClass(h)})},_itemClickEvent:function(o){var n=this,p=o.data(l);n._setItemActive(p,o)},_clearActive:function(){var n=this,o=n.get("el");o.all("."+a).removeClass(b)},_getItem:function(q){var o=this,p=o.get("items"),n=null;f.each(p,function(r){if(r.value===q){n=r;return false}});return n},_getItemEl:function(r){var o=this,q=o.get("el"),p=q.all("."+a),n=null;p.each(function(s){if(s.data(l)===r){n=s;return false}});return n},_setItemActive:function(p,o){var n=this,q=n.getActiveItem();n._clearActive();o=o||n._getItemEl(p);if(o&&!o.hasClass(b)){o.addClass(b);if(n.get("isFormField")){n.get("hideEl").val(p.value)}n.fire("change",{item:p,preItem:q})}},destroy:function(){var n=this,o=n.get("el");o.remove();n.detach();n.__attrVals={}}});var j=function(n){j.superclass.constructor.call(this,n)};j.ATTRS=f.merge(m,{tpl:{value:'<ul class="'+c+'"></ul>'},itemTpl:{value:'<li class="tab-item" data-value="{value}"><span class="'+e+'">{text}</span></li>'}});f.extend(j,m);m.Nav=j;var i=function(n){i.superclass.constructor.call(this,n)};f.extend(i,m);i.ATTRS={tpl:{value:'<ul class="'+k+'"></ul>'},itemTpl:{value:'<li class="tab-item" data-value="{value}"><a href="#" class="'+e+'">{text}</a></li>'}};m.Link=i;return m});
