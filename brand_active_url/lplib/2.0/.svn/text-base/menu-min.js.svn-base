KISSY.add(function(g){var B=g.DOM,n=g.Event,D=g.Node,o="menu-item-active",z="menu-minus",l="menu-tag",q="menu-plus",u="menu-container",t="menu-ul",G="ks-clear",h="menu-first-container",s="menu-li",v="menu-item",F="menu_sp",w="menu-ul-next",d="menu-ul-next-close",A="menu-item-next",k="menu-p-content",c="menu-font",y="data-item",m="menu-item-",f="menu-item-next_",C="\u5bf9\u4e0d\u8d77,\u7ed1\u5b9a\u65f6\uff0c\u627e\u4e0d\u5230\u7ed1\u5b9a\u8282\u70b9.",p="\u5bf9\u4e0d\u8d77\uff0c\u4f60\u8bbe\u7f6e\u7684\u5bbd\u5ea6\u4e0d\u662f\u6b63\u786e\u7684\u503c\uff01",e="\u5bf9\u4e0d\u8d77\uff0c\u4f60\u8bbe\u7f6e\u7684\u9ad8\u5ea6\u4e0d\u662f\u6b63\u786e\u7684\u503c\uff01",x=100,j=25,a="#5c637b",r="#414da7",i="#FFF";var b=function(I){var H={collapsible:true,items:[],renderTo:"body"};var E=this;var J=g.merge(H,I);b.superclass.constructor.call(E,J);g.mix(E,J);E._init()};g.extend(b,g.Base);g.augment(b,{msg:"Loading...",NOT_FOUND_TAB:"\u5bf9\u4e0d\u8d77\uff0c\u627e\u4e0d\u5230\u914d\u5957\u4f7f\u7528\u7684Tab\u5361\u5bf9\u8c61",TAB_FUNCTION_ERROR:"\u5bf9\u4e0d\u8d77\uff0c\u8c03\u7528tab\u51fd\u6570\u51fa\u9519\uff01",_html:function(){var E=this;var L=g.one(E.renderTo);if(L===null){E.exception(C);return}E.set("container",L);if(E.items.length!==0){var K='<div class="'+u+'"><ul class="'+t+" "+G+'"></ul></div>';var J=new D(K).appendTo(L),M=J.children("ul"),H=E.items;for(var I=0;I<H.length;I++){E._createMenuItem(H[I],M)}B.css("."+v,{cursor:"pointer"});B.css("."+l,{cursor:"pointer"})}},_createMenuItem:function(Q,P){if(!Q){return}var N=this,E="",K="",O=null;if(Q.id){E=m+Q.id}else{E=m+g.guid();g.log("auto set id for  item")}var L="";if(Q.isOpen===false){L=z}else{L=q}K+='<li class="'+s+'"><div class="'+h+'"><p class="'+v+'" id="'+E+' ks-clear" ><span class="'+L+" "+l+'"></span><span class="'+c+'">'+(Q.text||"")+"</span></p></div> ";K+="</li>";O=new D(K).appendTo(P);O.data(y,Q);if(Q.items){var J="";if(Q.isOpen===false){J='<ul class="'+w+" "+d+'" ></ul>'}else{J='<ul class="'+w+'" ></ul>'}var H=new D(J).appendTo(O);if(Q.items.length!==0){var M=Q.items;for(var I=0;I<M.length;I++){N._createSubMenuItem(M[I],H)}}}return O},_createSubMenuItem:function(J,I){if(!J){return}var K="",H="";if(J.id){K=f+J.id}else{K=f+g.guid()}H+='<li ><a class="'+A+'" id="'+K+'" href="'+(J.href===undefined?"#":J.href)+'"><em class="'+k+'">'+J.text+"</em></a></li>";var E=new D(H).appendTo(I);E.data(y,J)},_setUI:function(){var E=this,J=/^\d{0,10}$/;if(E.height){var I=E.height.replace("px","");if(I!==""){if(I.match(J)===null){E.exception(e)}else{B.css(".menu-container",{height:I+"px"})}}}if(E.width){var H=E.width.replace("px","");if(H!==""){if(H.match(J)===null){E.exception(p)}else{B.css("."+u,{width:H+"px"})}}}B.css("."+c,{width:(H-j)+"px"})},_setCollapible:function(){var E=this;if(E.collapible){var H=E.get("container");H.all("."+v).on("click",function(J){var I=this;J.preventDefault();var K=B.siblings(B.parent(I))[0],L=B.children(I)[0];if(B.css(K,"display")==="block"){B.css(K,{display:"none"})}else{B.css(K,{display:"block"})}if(B.attr(L,"class")===z+" "+l){B.attr(L,"class",q+" "+l)}else{B.attr(L,"class",z+" "+l)}});H.all("."+l).on("click",function(J){var I=this,L=B.siblings(B.parent(B.parent(I)));if(L.length>0){var K=L[0];if(B.css(K,"display")==="block"){B.css(K,{display:"none"})}else{B.css(K,{display:"block"})}}if(B.attr(I,"class")===z+" "+l){B.attr(I,"class",q+" "+l)}else{B.attr(I,"class",z+" "+l)}J.stopPropagation()})}},_setTabEvent:function(){var E=this,H=E.get("container");H.all("."+A).on("click",function(K){var J=this;K.preventDefault();var N=B.attr(this,"id"),M=N.replace(N.split("_")[0]+"_",""),L=B.text(this),I=B.attr(this,"href");E.fire("menuclick",{text:L,id:M,href:I});if(B.attr(this,"class")===A){E.setMenuActive(M)}J.blur()})},_setNextItemFontEvent:function(){var E=this,H=E.get("container");H.all("."+A).on("mouseover",function(){B.css(this,{color:r})});H.all("."+A).on("mouseleave",function(){B.css(this,{color:a})})},getSelectedItem:function(){var E=this,J=E.get("container"),K=J.one("."+o);if(!K){return null}var H=K.parent(),I=H.data(y);return I},setMenuActive:function(M){var E=this,I=E.get("container");if(M==="none"){B.replaceClass(I.all("."+o),o,A);B.css(I.all("."+A),{color:a});return}var K=B.parent(B.parent("#"+f+M));if(!K){return}if(B.css(K,"display")==="none"){var L=B.children(B.children(B.prev(K))[0])[0];B.attr(L,"class",q);B.css(K,{display:"block"})}var H=B.attr("#"+f+M,"href");var J=B.text("#"+f+M);E.fire("selectchanged",{text:J,id:M,href:H});B.replaceClass(I.all("."+o),o,A);B.replaceClass("#"+f+M,A,o);B.css(I.all("."+A),{color:a});B.css(I.all("."+o),{color:i});I.all("."+o).on("mouseover",function(){var N=this;if(B.attr(N,"class")===A){B.css(N,{color:r})}else{B.css(N,{color:i})}});I.all("."+o).on("mouseleave",function(){var N=this;if(B.attr(N,"class")===A){B.css(N,{color:a})}else{B.css(N,{color:i})}})},exception:function(E){g.log(E)},_initDom:function(){var E=this;E._html();E._setUI()},_initEvent:function(){var E=this;E._setNextItemFontEvent();E._setCollapible();E._setTabEvent()},_init:function(){var E=this;E._initDom();E._initEvent()}});g.namespace("LP");g.LP.Menu=b},{requires:["core"]});
