KISSY.add(function(a,d,b,c){var f=a.Node,i=a.DOM,h=a.Event,e=a.UA;function g(k){var j=this,l={buttons:[{text:"\u786e \u8ba4",handler:k.success},{text:"\u53d6 \u6d88",handler:function(){if(k.closeAction==="destroy"){j.destroy()}else{j.hide()}}}],constrain:true,draggable:true,prefixCls:"lp-",height:400,mask:true,collapse:false,title:"\u6807\u9898",width:400,zIndex:1050},k=a.merge(l,k,{resize:false,destroy:false});if(!(j instanceof g)){return new g(k)}g.superclass.constructor.call(j,k)}a.extend(g,d.Dialog,{renderUI:function(){var j=this;j._setCloseIcon()},bindUI:function(){var j=this;j._initIconEvent();j._initDestroyEvent()},_uiSetHeader:function(){var j=this,k=j.get("title");if(k){var l='<div class="header-title">'+k+"</div>";j.get("header").append(l)}},_uiSetBody:function(){var j=this,k=j._getTemp();j.set("bodyContent",k)},_uiSetFooter:function(){var j=this,m=j.get("footer"),l=j.get("buttons"),k=j.get("prefixCls");if(l){m.html("");a.each(l,function(q,n){var p=new f('<button class="button button-primary '+k+'stdmod-button">'+q.text+"</button>");if(q.toggleCls){p.toggleClass(q.toggleCls)}if(n===0){p.addClass(k+"stdmod-button-first")}p.appendTo(m);var o=q.eventType?q.eventType:"click";if(o&&q.handler){h.on(p,o,q.handler,j)}})}},_uiSetCollapse:function(n){if(!n){return}var j=this,m=j.get("el"),k=j.get("prefixCls"),l=new f('<a tabindex="1" href="javascript:void(0)" class="'+k+'ext-collapse" hidefocus="true"><span class="x-icon x-icon-normal '+k+'ext-collapse-icon">\u25b2</span></a>');m.append(l);j.set("culcollapse","fold")},syncUI:function(){var j=this;j._autoSetBodySize()},show:function(){var j=this;j.render();j.center();g.superclass.show.call(j)},destroy:function(){var j=this;j.fire("beforeDestroy");g.superclass.destroy.call(j)}});a.augment(g,{_autoSetBodySize:function(){var u=this,r=u.get("header"),s=u.get("body"),x=u.get("footer"),n=u.get("el"),t=u.get("prefixCls"),p=n.one("."+t+"contentbox").outerWidth(true)-n.one("."+t+"contentbox").outerWidth(),q=s.innerWidth()-s.width(),w=s.outerWidth()-s.innerWidth(),k=s.outerWidth(true)-s.outerWidth(),l=n.width()-p-w-k-q,m=n.one("."+t+"contentbox").outerHeight(true)-n.one("."+t+"contentbox").outerHeight(),o=s.innerHeight()-s.height(),v=s.outerHeight()-s.innerHeight(),j=s.outerHeight(true)-s.outerHeight(),y=n.height()-m-r.height()-x.height()-v-o;s.css({width:l,height:y})},_getTemp:function(){var j=this,l=/^#/;if(!j.get("contentId")){return}var m=l.test(j.get("contentId"))?j.get("contentId"):"#"+j.get("contentId"),k=a.one(m);if(!k){throw new Error('\u672a\u627e\u5230"id"\u4e3a"'+j.get("contentId")+'"\u7684\u5bb9\u5668')}temp=k.children();j.set("tempWrap",k);j.set("temp",temp);return temp},_setCloseIcon:function(){var j=this,k=j.get("prefixCls");if(!j.get("closable")){return}var l=j.get("el"),m=l.one("."+k+"ext-close-x");m.addClass("x-icon x-icon-normal");m.html("\u00d7")},setBodyContent:function(k){var j=this;j.set("bodyContent",k)},_initIconEvent:function(){var j=this,l=j.get("el"),k=j.get("prefixCls");h.delegate("."+k+"dialog","mouseenter mouseleave",".x-icon",function(m){var n=a.one(m.target);n.toggleClass("x-icon-hover")});h.delegate("."+k+"dialog","click","."+k+"ext-collapse",function(m){var n=a.one(m.target);if(j.get("culcollapse")==="fold"){l.css({height:"22px",overflow:"hidden"});j.set("culcollapse","unfold");n.html("\u25bc")}else{l.css({height:"auto",overflow:""});j.set("culcollapse","fold");n.html("\u25b2")}})},_initDestroyEvent:function(){var j=this;j.on("beforeDestroy",function(){var l=j.get("tempWrap"),k=j.get("temp");l.append(k)})}});a.namespace("LP");a.LP.Dialog=g},{requires:["overlay","dd","resizable","./css/controls.css"]});
