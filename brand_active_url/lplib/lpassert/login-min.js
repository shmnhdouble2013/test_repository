KISSY.add(function(c){var e=c.DOM,a=c.Event;var b="ks-active",d="data-value";function f(h){var g=this;g.config=h;g._init()}c.augment(f,{_init:function(){var g=this;g.formValidation=new c.Validation("#J_LoginForm",{style:"text"});g.initLoginName();g._initEvent()},_initEvent:function(){var g=this;c.one("#J_Submit").on("click",function(){g.submitLogin()});a.on(".form-field-text","keyup",function(h){if(h.which===13){g.submitLogin()}});a.on(".form-field-small-text","keyup",function(h){if(h.which===13){g.submitLogin()}})},initLoginName:function(){var g=this,h=c.one("#login-name"),i=c.Cookie.get("lpLoginName");if(!h.val()&&i){h.val(i)}},submitLogin:function(){var g=this;if(g.formValidation.isValid()){g.saveLoginName();c.get("#J_LoginForm").submit()}},saveLoginName:function(){var g=this,h=new Date(),i=c.one("#login-name").val();h.setTime(h.getTime()+18400000000);c.Cookie.set("lpLoginName",i,h)}});c.namespace("LP");c.LP.Login=f},{requires:["lpassert/validation"]});
