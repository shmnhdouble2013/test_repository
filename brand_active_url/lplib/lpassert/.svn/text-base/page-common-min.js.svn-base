KISSY.add("checkbox",function(c){var a="checked";function b(e){var d=this;if(c.isString(e)){this.checkList=c.all(e)}else{this.checkList=e}}c.augment(b,{getCheckedValue:function(){var d=this.checkList,g,e=[],f=[];d.each(function(h){if(h.attr(a)){e.push(h.val());f.push(h.next("label").html())}});g={value:e,text:f};return g},setCheckedValue:function(f,e,g){var d=this.checkList;if(c.isString(f)){f=f.split(e)}d.each(function(h){if(c.inArray(h.val(),f)){h.attr(a,a)}else{if(!g){h.removeAttr(a)}}})},removeChecked:function(f,e){var d=this.checkList;if(c.isString(f)){f=f.split(e)}d.each(function(g){if(c.inArray(g.val(),f)){g.removeAttr(a,a)}})},clearChecked:function(){this.checkList.removeAttr(a)}});c.CheckBox=b;return b},{requires:["core"]});KISSY.add("popup-city",function(g){var g=KISSY,p=g.DOM,r=g.Event,s=document,q={group:[{value:"\u4e0a\u6d77,\u6c5f\u82cf,\u6d59\u6c5f",text:"\u6c5f\u6d59\u6caa"},{value:"\u4e0a\u6d77,\u6c5f\u82cf,\u6d59\u6c5f,\u5b89\u5fbd,\u798f\u5efa,\u6c5f\u897f,\u5c71\u4e1c",text:"\u534e\u4e1c"},{value:"\u5317\u4eac,\u5929\u6d25,\u6cb3\u5317,\u5c71\u897f,\u5185\u8499\u53e4",text:"\u534e\u5317"},{value:"\u6e56\u5317,\u6e56\u5357,\u6cb3\u5357,\u6c5f\u897f",text:"\u534e\u4e2d"},{value:"\u5e7f\u4e1c,\u5e7f\u897f,\u6d77\u5357,\u53f0\u6e7e,\u9999\u6e2f,\u6fb3\u95e8",text:"\u534e\u5357"},{value:"\u8fbd\u5b81,\u5409\u6797,\u9ed1\u9f99\u6c5f",text:"\u4e1c\u5317"},{value:"\u9655\u897f,\u7518\u8083,\u9752\u6d77,\u5b81\u590f,\u65b0\u7586",text:"\u897f\u5317"},{value:"\u91cd\u5e86,\u56db\u5ddd,\u8d35\u5dde,\u4e91\u5357,\u897f\u85cf",text:"\u897f\u5357"},{value:"\u53f0\u6e7e,\u9999\u6e2f,\u6fb3\u95e8",text:"\u6e2f\u6fb3\u53f0"},{value:"\u6d77\u5916",text:"\u6d77\u5916"},],item:[{value:"\u5317\u4eac",text:"\u5317\u4eac"},{value:"\u5929\u6d25",text:"\u5929\u6d25"},{value:"\u6cb3\u5317",text:"\u6cb3\u5317"},{value:"\u5c71\u897f",text:"\u5c71\u897f"},{value:"\u5185\u8499\u53e4",text:"\u5185\u8499\u53e4"},{value:"\u8fbd\u5b81",text:"\u8fbd\u5b81"},{value:"\u5409\u6797",text:"\u5409\u6797"},{value:"\u9ed1\u9f99\u6c5f",text:"\u9ed1\u9f99\u6c5f"},{value:"\u4e0a\u6d77",text:"\u4e0a\u6d77"},{value:"\u6c5f\u82cf",text:"\u6c5f\u82cf"},{value:"\u6d59\u6c5f",text:"\u6d59\u6c5f"},{value:"\u5b89\u5fbd",text:"\u5b89\u5fbd"},{value:"\u798f\u5efa",text:"\u798f\u5efa"},{value:"\u6c5f\u897f",text:"\u6c5f\u897f"},{value:"\u5c71\u4e1c",text:"\u5c71\u4e1c"},{value:"\u6cb3\u5357",text:"\u6cb3\u5357"},{value:"\u6e56\u5317",text:"\u6e56\u5317"},{value:"\u6e56\u5357",text:"\u6e56\u5357"},{value:"\u5e7f\u4e1c",text:"\u5e7f\u4e1c"},{value:"\u5e7f\u897f",text:"\u5e7f\u897f"},{value:"\u6d77\u5357",text:"\u6d77\u5357"},{value:"\u91cd\u5e86",text:"\u91cd\u5e86"},{value:"\u56db\u5ddd",text:"\u56db\u5ddd"},{value:"\u8d35\u5dde",text:"\u8d35\u5dde"},{value:"\u4e91\u5357",text:"\u4e91\u5357"},{value:"\u897f\u85cf",text:"\u897f\u85cf"},{value:"\u9655\u897f",text:"\u9655\u897f"},{value:"\u7518\u8083",text:"\u7518\u8083"},{value:"\u9752\u6d77",text:"\u9752\u6d77"},{value:"\u5b81\u590f",text:"\u5b81\u590f"},{value:"\u65b0\u7586",text:"\u65b0\u7586"},{value:"\u53f0\u6e7e",text:"\u53f0\u6e7e"},{value:"\u9999\u6e2f",text:"\u9999\u6e2f"},{value:"\u6fb3\u95e8",text:"\u6fb3\u95e8"},{value:"\u6d77\u5916",text:"\u6d77\u5916"},]},f=",",l="a",h="click",j="align",m="div",d="input",e="span",n="srcNode",k="triggerNode",i,c,o,b;function a(u){var t=this;t.config=u||{};this._init()}g.augment(a,{_init:function(){this._initDOM();this.setPopupBox();this.more=i;this.popup=c},_initDOM:function(){var t=s.createElement(m);t.style.cssText="display:none;";t.id="J_Popup";t.appendChild(this.createGroup(q.group,"J_CheckboxGroup"));t.appendChild(this.createGroup(q.item,"J_Checkbox"));t.appendChild(this.createButton());document.body.appendChild(t)},createItem:function(w){var v,t,u;t=s.createElement(d);t.type="checkbox";t.value=w.value;t.className="form-field-checkbox";u=s.createElement("label");u.className="form-label";u.innerHTML=w.text;v=s.createElement(e);v.className="select-item";v.appendChild(t);v.appendChild(u);return v},createGroup:function(v,x){var w=s.createElement(m),u;w.className="select-list ks-clear";w.id=x;for(var t in v){u=this.createItem(v[t]);w.appendChild(u)}return w},createButton:function(){var t=s.createElement(m);t.className="select-list";t.innerHTML="<a class='form-button' href='javascript:void(0);' id='J_Ok'> <button class='form-button-blue2' type='button'>\u786e\u5b9a</button></a><a class='form-button' href='javascript:void(0);' id='J_Cancel'><button class='form-button-blue2' type='reset'>\u53d6\u6d88</button></a>";return t},setPopupBox:function(){var u=this;var t=u.config.mx||10,v=u.config.min||0;i=new g.More("#J_Rule",{itemList:".table-item",del:".form-field-container",delTips:true,max:t,min:v,minFn:function(){g.LP.Message.Alert("\u4e0d\u80fd\u5c0f\u4e8e"+v+"\u9879")},maxFn:function(){g.LP.Message.Alert("info","\u4e0d\u80fd\u5927\u4e8e"+t+"\u9879","")}});c=new g.Overlay({srcNode:"#J_Popup",width:450,mask:true,elStyle:{position:"absolute",display:"block"}});b=new g.CheckBox("#J_CheckboxGroup input");o=new g.CheckBox("#J_Checkbox input");b.checkList.on("click",function(){var x=p.val(this),w=p.attr(this,"CHECKED");if(w){o.setCheckedValue(x,f,true)}else{o.removeChecked(x,f)}});i.itemList.each(function(w){w.one(l).on(h,function(){c.set(k,this);c.show()})});c.on("show",function(y){var x=c.get(k),w=p.prev(x,d);b.clearChecked();o.setCheckedValue(p.val(w),f);c.align(x,["tr","tl"],[0,0])});r.on("#J_Ok",h,function(){var x=false,B=c.get(k),A=p.prev(B,d),w=p.prev(B,e),D=o.getCheckedValue();var z=[],C=p.val(p.prev(B,d)),y;i.itemList.each(function(E){y=E.one(d).val();if(y!==C){z.push(y)}});z=z.join(f).split(f);g.each(D.value,function(E){if(g.inArray(E,z)){x=true;return}});c.hide();if(x){g.LP.Message.Alert("\u60a8\u9009\u62e9\u4e86\u91cd\u590d\u9879,\u4e0d\u80fd\u91cd\u590d\u9009\u62e9\uff01");return}p.val(A,D.value.join(f));p.html(w,D.text.join(f))});r.on("#J_Cancel",h,function(){c.hide()});r.on("#J_AddRule",h,function(x){x.halt();i.template.one(".text-val").html("");i.template.all(d).val("");var w=i.add();if(w){w.one(l).on(h,function(){c.set(k,this);c.show()})}})}});g.PopupCity=a;return a},{requires:["core","overlay","checkbox","1.0/message"]});KISSY.add("more",function(c){var b=c.Node,d=0;function a(g,h){var f=this;if(!(f instanceof a)){return new a(g,h)}var e={max:10,min:0};f.config=c.merge(e,h||{});f.container=c.one(g);if(!f.container){return}this._init()}c.extend(a,c.Base);c.augment(a,{_init:function(){var f=this.config.template,e=this;this._freshList();if(!f&&this.itemList){e.container=this.itemList.parent();f=this.itemList[0].cloneNode(true);this.template=c.one(f)}else{this.template=new b(f)}if(!this.config.postback){this.itemList.each(function(g){e._renderDel(g)})}else{this.itemList.each(function(g){g.all("input").attr("disabled","disabled")})}if(this.config.form){c.one(this.config.form).on("submit",function(){e.setName()})}},_freshList:function(){var e=this.config.itemList;if(e){this.itemList=this.container.all(e)}},setName:function(){if(!this.itemLenth){var e=new b("<input type='hidden' name='length' />").val(this.itemList.length);this.container.append(e);this.itemLenth=e}else{this.itemLenth.val(this.itemList.length)}this.itemList.each(function(h,f){var g=h.all("*");g.each(function(j){var i=j.attr("rname")||j.attr("name");if(i){j.attr("rname",i);j.attr("name",i+f)}})})},add:function(){var f=c.one(this.template[0].cloneNode(true)),g=this.itemList.length;if(g>=this.config.max){var e;if(e=this.config.maxFn){e()}return null}if(this.config.del){this._renderDel(f)}this.container.append(f);this._freshList();return f},remove:function(g){if(!g){return}var f=this.itemList.length;if(f<=this.config.min){var e;if(e=this.config.minFn){e()}return}this.fire("remove",{item:g});g.remove();this._freshList()},_renderDel:function(g){var f,e=this;f=new b("<a href='javascript:void(0);'>\u5220\u9664</a>");f.appendTo(g.one(this.config.del));f.on("click",function(h){h.halt();if(e.config.delTips){c.LP.Message.Confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f","\u5220\u9664\u63d0\u793a",function(){e.remove(g)})}else{e.remove(g)}})}});c.More=a;return a},{requires:["core"]});KISSY.add(function(d,a,b,c){return{More:a,PopupCity:b,CheckBox:c}},{requires:["more","popup-city","checkbox"]});
