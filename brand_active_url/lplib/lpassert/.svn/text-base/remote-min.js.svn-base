KISSY.add(function(b,d,a,e){function c(h,i,o){var g=null,k=null,f=new e.Util.storage(),l=d.attr(h,"name"),j={type:"POST",dataType:"json",data:{}};j.data[l]=null;b.mix(j,i);j.data[l]=null;function n(p){var q=p;return function(r,t,s){if(q!=k){return}if(!r&&!r.state){Util.log('\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u9519\u8bef\uff0c\u6b63\u786e\u7684\u683c\u5f0f\u5982\uff1a\n\n {"state": false,"message": "\u63d0\u793a\u4fe1\u606f"}');self.showMessage(0,"\u6821\u9a8c\u5931\u8d25");return}if(r.state){o(1,r.message)}else{o(0,r.message)}if(b.isFunction(i.success)){i.success.call(self,r,t,s)}}}function m(s,t,r){var q=d.attr(h,"name"),p={type:"POST",dataType:"json",data:{}};b.mix(p,i);p.error=function(u,w,v){if(b.isFunction(i.error)){i.success.call(this,u,w,v)}};if(i.data&&b.isFunction(i.data)){b.mix(p.data,i.data)}p.data[q]=t;p.data[r]=t;p.success=function(u,w,v){f.add(t,u);n(s).call(this,u,w,v)};b.io(p)}this.check=function(s,p){var q=f.get(s);if(q){return q}if(g){g.cancel()}g=b.later(function(){k=b.guid();m(k,s,p)},500);return{message:"loading",state:false}}}return c},{requires:["dom","event","lpassert/validation"]});
