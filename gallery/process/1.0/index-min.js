
/* build Date:2015-01-13 3:25:04 PM author:huangjia */
KISSY.add("gallery/process/1.0/index",function(a,b){function c(b){var d=this;if(!(d instanceof c))return new c(b);if(c.superclass.constructor.call(d,b),d.container=a.get(b.container),d.lis=a.all(f,d.container),d.itemLen=d.lis.length,d.itemLen<=1)throw"步骤流程节点数为空或者只有1个节点！";d._init()}var d=a.DOM,e=(a.Event,"auto"),f="li";return a.extend(c,a.Base),c.VERSION=1,c.cls={STEPS:"ks-steps",ITEM:"ks-steps-item",CURRENT:"step-cur",TITLE:"step-name",SEPNO:"step-no",DONE:"step-done",FIRST:"step-first",LAST:"step-last"},c.PROCESS_LI_TPL='<ol><li title="" ><div class="step-name"></div><div class="step-marks"></div></li></ol>',c.ATTRS={liMinWidth:{value:50,setter:function(b){var c=this;return a.isNumber(b)&&b>=c.liMinWidth?b:50}},forceFit:{value:!1,setter:function(b){return a.isBoolean(b)?b:!1}},firstLastHalf:{value:!1,setter:function(b){return a.isBoolean(b)?b:!1}},width:{value:960,setter:function(b){var c=parseInt(b,10);return a.isNumber(c)&&c?c:a.isString(b)?"auto":960}}},a.augment(c,{_init:function(){var a=this;a.renderLi(),a.setWidth()},setWidth:function(b){function c(){d.width(j,d.width(j)/2),d.width(i,d.width(i)/2)}var f,g=this,h=a.isNumber(b)&&b>=g.get("liMinWidth")*g.itemLen?b:g.get("width"),i=g.lis[g.itemLen-1],j=g.lis[0];return h==e?d.css(g.lis,{width:e}):g.get("firstLastHalf")?(h=Number(h/g.itemLen-1),d.width(g.lis,h),c()):(h=Number(h/g.itemLen),d.width(g.lis,h)),g.get("forceFit")&&(f=d.width(g.container),h=Number(f/g.itemLen-1),d.width(g.lis,h)),h},renderLi:function(){var c=this;a.each(c.lis,function(d,e){var f=c.renderLiNo(d,e),g={headerText:"相关信息",contentText:a.one(d).attr("title"),delayIn:100,points:["cc","cc"]};c.get("tipConfig")&&(g=c.get("tipConfig")),new b(a.one(f),g)}),c.addFirtEndNodeCls()},renderLiNo:function(b,e){var f=++e,g=d.create('<div class="'+c.cls.SEPNO+'">'+f+"</div>"),h=a.get("."+c.cls.TITLE,b);return d.insertAfter(g,h),g},addFirtEndNodeCls:function(){var b=this;a.one(b.lis[0]).addClass(c.cls.FIRST),a.one(b.lis[b.itemLen-1]).addClass(c.cls.LAST)}}),c},{requires:["gallery/tip/1.0/index","gallery/process/1.0/process.css"]});