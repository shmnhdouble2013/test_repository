
/* build Date:2015-01-13 4:37:16 PM author:huangjia */
!function(a,b){$window=a(b),a.fn.lazyload=function(c){function d(){var b=0;e.each(function(){var c=a(this);if(!(f.skip_invisible&&!c.is(":visible")||a.abovethetop(this,f)||a.leftofbegin(this,f)))if(a.belowthefold(this,f)||a.rightoffold(this,f)){if(++b>f.failure_limit)return!1}else c.trigger("appear")})}var e=this,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return c&&(void 0!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),void 0!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(f,c)),$container=void 0===f.container||f.container===b?$window:a(f.container),0===f.event.indexOf("scroll")&&$container.bind(f.event,function(){return d()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.one("appear",function(){if(!this.loaded){if(f.appear){var d=e.length;f.appear.call(b,d,f)}a("<img />").bind("load",function(){c.hide().attr("src",c.data(f.data_attribute))[f.effect](f.effect_speed),b.loaded=!0;var d=a.grep(e,function(a){return!a.loaded});if(e=a(d),f.load){var g=e.length;f.load.call(b,g,f)}}).attr("src",c.data(f.data_attribute))}}),0!==f.event.indexOf("scroll")&&c.bind(f.event,function(){b.loaded||c.trigger("appear")})}),$window.bind("resize",function(){d()}),d(),this},a.belowthefold=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.height()+$window.scrollTop():$container.offset().top+$container.height(),e<=a(c).offset().top-d.threshold},a.rightoffold=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.width()+$window.scrollLeft():$container.offset().left+$container.width(),e<=a(c).offset().left-d.threshold},a.abovethetop=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.scrollTop():$container.offset().top,e>=a(c).offset().top+d.threshold+a(c).height()},a.leftofbegin=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.scrollLeft():$container.offset().left,e>=a(c).offset().left+d.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightofscreen(b,c)||a.leftofscreen(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(c){return a.belowthefold(c,{threshold:0,container:b})},"above-the-top":function(c){return!a.belowthefold(c,{threshold:0,container:b})},"right-of-screen":function(c){return a.rightoffold(c,{threshold:0,container:b})},"left-of-screen":function(c){return!a.rightoffold(c,{threshold:0,container:b})},"in-viewport":function(c){return!a.inviewport(c,{threshold:0,container:b})},"above-the-fold":function(c){return!a.belowthefold(c,{threshold:0,container:b})},"right-of-fold":function(c){return a.rightoffold(c,{threshold:0,container:b})},"left-of-fold":function(c){return!a.rightoffold(c,{threshold:0,container:b})}})}(jQuery,window);