
/* build Date:2015-01-12 6:02:45 PM author:huangjia */
KISSY.add("pinganfang-gallary/header_kissy",function(a,b,c,d,e){function f(){var a=this;a._init()}var g=a.all,h="data-item",i="nav_selected",j="hover_nav",k="data-hasdata",l="hide",m=15,n=g(".nav_link",".header-navlist"),o=g(".leveltwo-list-content"),p=g(".level-two-ulist",o),q=null;return a.augment(f,{_init:function(){var a=this;a.curnavel=a._getSelectedNavEl(),new e({node:"#headerSearchContent"}),a._noticeRender(),a._headerInit(),a._eventInit()},_eventInit:function(){function b(b){var c=a.one(b.target),d=c.text(),e=c.attr("data-href");DOM("#headerSearchType").text(d),DOM("#J_serch-form").attr("action",e)}var d,e=this;g(window).on("resize",function(){d&&clearTimeout(d),d=setTimeout(function(){e._showSecondMenuUl(e.curnavel)},150)}),n.on("mouseenter",function(){e._navHoverStyle(this),e._showSecondMenuUl(this)}).on("mouseleave",function(){var a=g(this);a.removeClass(j)}),o.on("mouseenter",function(){var a=g(n[q]),b=a.hasClass(i);!b&&a.addClass(j)}).on("mouseleave",function(){g(n[q]).removeClass(j),e._showSecondMenuUl(e.curnavel)}),g("#J_nav-menu").on("mouseleave",function(){e._showSecondMenuUl(e.curnavel)}),c.on(".j_house-type-set","click",function(a){b(a)}),c.on(".search_type_box","mouseenter mouseleave",function(b){var c=a.one(this).children(".hd_search_pop"),d=b.type;"mouseenter"==d?c.show():c.hide()})},_headerInit:function(){var a=this;n.each(function(a,b){g(a).attr(h,b)}),a._showSecondMenuUl(a.curnavel)},_getSelectedNavEl:function(){var a=null;return n.each(function(b){var c=g(b).hasClass(i);return c?(a=g(b),!1):void 0}),a},_showSecondMenuUl:function(a){var b=this,c=g(a),d=parseInt(c.attr(h),10),e=b._getNavUl(d),f=0,i=c.offset().left;return q=d,o.show(),e?(f=e.outerWidth(!0),i=i-f/3+m,p.hide(),void e.css({position:"absolute",top:0,left:i}).show()):void o.hide()},_navHoverStyle:function(a){var b=g(a),c=b.hasClass(i);!c&&b.addClass(j)},_getNavUl:function(a){var b=null;return p.each(function(c){var d=g(c),e=parseInt(d.attr(h),10);return e===a?(b=d,!1):void 0}),b},_noticeRender:function(){var b=g("#J_head-notice"),c=b.first(),e=a.trim(c.text()),f=0!==parseInt(b.attr(k),10)?!0:!1;e&&f?(b.removeClass(l),setTimeout(function(){d(b,{height:0,opacity:0}).run()},1e4)):b.addClass(l)}}),f},{requires:["node","event","anim","kg/placeholder/2.0.0/index"]});