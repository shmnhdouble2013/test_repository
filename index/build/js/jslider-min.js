
/* build Date:2015-01-12 6:02:45 PM author:huangjia */
!function(a){function b(b,c){var d=this;return a.extend(d,{autoSlide:!1,effect:"hSlide",eventType:"click",hoverStop:!0,contentClass:"slide-content",pannelClass:"tab-pannel",navClass:"tab_list",triggerSelector:"li",selectedClass:"selected",viewTime:3e3,speed:300,lazyloadCls:"ks_data-lazyload",defaultIndex:0,autoResponsiveLayout:!0,initStyleCallback:null,slideBefore:null,slideAfter:null},c),d.slidContainr=a("#"+b),d.slidContainr?(d.pannelContainer=a("."+d.contentClass,d.slidContainr),d.aPnnels=a("."+d.pannelClass,d.pannelContainer),d.pannelLength=d.aPnnels.length,d.pannelTextareas=a("."+d.lazyloadCls,d.aPnnels),d.navListContent=a("."+d.navClass,d.slidContainr),d.tabListDom=a(d.triggerSelector,d.navListContent),void d.init()):void console.log("请指定轮播容器Id！")}var c="data-tab-index",d={width:0,height:0,overflow:"hidden",border:"none",display:"none"},e={overflow:"hidden",position:"relative"};b.prototype={construcotr:b,init:function(){var a=this;a.getContentPannelWh(),a.styleInit(),a.addTabIndex(),a.eventInit(),a.isAutoRun(a.autoSlide),a.setPannelIndex(a.defaultIndex)},clearStyle:function(){var a=this;a.pannelContainer.attr("style",""),a.scrollBox&&a.scrollBox.attr("style",""),a.aPnnels.attr("style","")},resetSlierWidthHeight:function(){var a=this;a.clearStyle(),setTimeout(function(){a.getContentPannelWh(),a.styleInit()},150)},getContentPannelWh:function(){var a=this;a.pannelContWidth=a.pannelContainer.width(),a.pannelContheigth=a.pannelContainer.height(),a.pannelWidth=a.aPnnels.width(),a.pannelHeight=a.aPnnels.height()},eventInit:function(){var b=this;if(b.tabListDom.on(b.eventType,function(d){var e=a(d.target).parent(b.triggerSelector),f=e.attr(c);b.isAutoRun(!1),b.slideChange(f)}),b.autoSlide&&b.tabListDom.on("mouseout",function(){b.isAutoRun(!0)}),b.autoSlide&&b.hoverStop&&b.pannelContainer.delegate(b.aPnnels,"mouseover mouseout",function(a){var c=a.type;b.isAutoRun("mouseover"===c?!1:!0)}),b.autoResponsiveLayout){var d;a(window).resize(function(a){a.stopPropagation(),b.isResetSlierWidthHeight||(d&&clearTimeout(d),b.isResetSlierWidthHeight=!0,d=setTimeout(function(){b.resetSlierWidthHeight(),b.slideChange(0),setTimeout(function(){b.isResetSlierWidthHeight=!1},200)},300))})}},addTabIndex:function(){var b=this,d=0,e=b.tabListDom.length;for(d;e>d;d++)a(b.tabListDom[d]).attr(c,d)},isAutoRun:function(a,b){var c=this;setTimeout(function(){a?c.setInterval_obj||(c.setInterval_obj=setInterval(function(){c.slideChange(b)},c.viewTime)):(clearInterval(c.setInterval_obj),c.setInterval_obj=null)},200)},slideChange:function(b,c){var d=this,b=parseInt(b,10),b=b>=0?b:null;if(d.pannelWidth&&!isNaN(d.pannelWidth)){var e=d.moveBoxLeft+d.pannelWidth,f=d.scrollWidth-d.pannelWidth;e>f?d.moveBoxLeft=0:d.moveBoxLeft+=d.pannelWidth,"number"==typeof b&&(d.moveBoxLeft=b*d.pannelWidth)}d.renderDataLazyLoad(d.aPnnels[d.getPannelIndex()]),d.tabListChange(b);var g=d.moveBoxLeft<=0?0:-d.moveBoxLeft,h=d.tabListDom[b||d.getPannelIndex()];a.isFunction(d.slideBefore)&&d.slideBefore.call(d,h),d.scrollBox.animate({left:g},d.speed,function(){a.isFunction(c)&&c.call(d,h),a.isFunction(d.slideAfter)&&d.slideAfter.call(d,h)})},renderDataLazyLoad:function(b){var c=this;if(b){var d=a("."+c.lazyloadCls,b);d.length>0&&c.loadAreaData(d)}},loadAreaData:function(b){var c=a(b).parent(),d=a(b).text()||"";a(b).remove(),c.append(a(d))},tabListChange:function(a){var b,c=this;b=a?a:c.getPannelIndex(),c.setTabCls(c.tabListDom[b])},getPannelIndex:function(){var a=this,b=a.moveBoxLeft/a.pannelWidth;return 0>=b?0:b},setTabCls:function(b){var c=this;c.tabListDom.removeClass(c.selectedClass),a(b).addClass(c.selectedClass)},styleInit:function(){var b=this;b.initStyleCallback&&a.isFunction(b.initStyleCallback)&&b.initStyleCallback.call(b),b.pannelTextareas.css(d);var c=a.trim(b.effect);"hSlide"==c&&(b.aPnnels.css({"float":"left"}),b.scrollWidth=b.pannelLength*b.pannelWidth,b.scrollHeight=b.pannelHeight),b.pannelContainer.css(e).css({width:b.pannelContWidth,heigh:b.pannelContheigth}),b.aPnnels.css(e).css({width:b.pannelWidth,heigh:b.pannelHeight});var f={width:b.scrollWidth,height:b.scrollHeight,padding:0,margin:0,left:0,top:0};return b.scrollBox?void b.scrollBox.css(f).css(e):(b.scrollBox=a("<div>").css(f).css(e),b.scrollBox.append(b.aPnnels),void b.pannelContainer.append(b.scrollBox))},setPannelIndex:function(a){var b=this;b.slideChange(b.getDefaultIndex(a))},getDefaultIndex:function(a){var b=this;return isNaN(a)?0:0>=a?0:a>b.pannelLength?b.pannelLength:a}},a.fn.jSlider=b}(jQuery||$);